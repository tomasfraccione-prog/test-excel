<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagn贸stico de Escalamiento Tecnol贸gico 2026</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root { --primary: #1e7e34; --secondary: #007bff; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); color: #333; padding: 20px; }
        .quiz-container { max-width: 650px; margin: auto; background: #fff; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .progress-container { width: 100%; background: #e0e0e0; height: 8px; border-radius: 10px; margin-bottom: 30px; }
        .progress-bar { height: 100%; background: var(--primary); width: 0%; border-radius: 10px; transition: 0.5s; }
        h2 { color: var(--primary); text-align: center; margin-top: 0; }
        .question, .lead-form, .results { display: none; }
        .active { display: block; animation: fadeIn 0.5s; }
        .options { list-style: none; padding: 0; margin: 25px 0; }
        button.option-btn { width: 100%; text-align: left; padding: 18px; border: 2px solid #eee; border-radius: 10px; background: white; cursor: pointer; transition: 0.2s; font-size: 16px; margin-bottom: 10px; }
        button.option-btn:hover { border-color: var(--primary); background: #f0fff4; }
        input, select { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        .submit-btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 18px; }
        .result-box { padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 5px solid; }
        .escalar { border-color: #007bff; background: #f0f7ff; color: #004085; }
        .moderado { border-color: #ffc107; background: #fffdeb; color: #856404; }
        .estable { border-color: #28a745; background: #f4fff6; color: #155724; }
        .pdf-btn { background: #555; margin-top: 10px; }
        .cta-btn { display: block; text-align: center; margin-top: 20px; padding: 15px; background: var(--secondary); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="quiz-container">
    <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>

    <div id="quiz-steps">
        <div id="questions-container"></div>

        <div id="lead-form" class="lead-form">
            <h2>隆Casi listo!</h2>
            <p>Complet谩 tus datos para generar el <b>Informe de Escalamiento</b> personalizado.</p>
            <input type="text" id="userName" placeholder="Nombre completo" required>
            <input type="email" id="userEmail" placeholder="Email corporativo" required>
            <input type="text" id="userCompany" placeholder="Empresa" required>
            <select id="userIndustry" required>
                <option value="">Seleccion谩 tu rubro</option>
                <option value="Agro">Agro (Plantineras, Hidropon铆a, Tradicional)</option>
                <option value="Juridico">Estudio Jur铆dico / Legal</option>
                <option value="Empresa">Empresa General / Pyme / Servicios</option>
            </select>
            <button class="submit-btn" onclick="processResults()">Obtener mi Diagn贸stico</button>
        </div>

        <div id="results" class="results">
            <h2 id="res-title">Resultado del Diagn贸stico</h2>
            <div id="res-box" class="result-box"></div>
            <p id="res-desc"></p>
            <button class="submit-btn pdf-btn" onclick="generatePDF()"> Descargar Informe por Rubro (PDF)</button>
            <a id="wa-link" href="#" class="cta-btn">Agendar una llamada de asesor铆a</a>
        </div>
    </div>
</div>

<script>
    const questions = [
        { q: "驴Tu equipo maneja archivos con nombres como 'Ventas_Final_v2' o 'Copia_REVISADO'?", risk: "Fragmentaci贸n de informaci贸n y p茅rdida de versiones." },
        { q: "驴Alguna vez alguien borr贸 una f贸rmula o un dato por error y se dieron cuenta tarde?", risk: "Vulnerabilidad en la integridad de datos cr铆ticos." },
        { q: "驴El archivo se vuelve lento, se 'traba' o se cierra cuando tiene mucha informaci贸n?", risk: "Saturaci贸n del motor de procesamiento (Techo de Excel)." },
        { q: "驴Sab茅s exactamente qui茅n modific贸 un dato sensible ayer a las 15hs?", risk: "Falta total de auditor铆a y seguridad de la informaci贸n." },
        { q: "驴Copi谩s y peg谩s datos de una planilla a otra para armar reportes semanales?", risk: "Alto costo en horas-hombre y error humano por tareas manuales." }
    ];

    let currentStep = 0; let score = 0; let userRisks = [];

    const qCont = document.getElementById('questions-container');
    questions.forEach((item, i) => {
        const div = document.createElement('div');
        div.className = `question ${i === 0 ? 'active' : ''}`;
        div.id = `q-${i}`;
        div.innerHTML = `<strong>${i + 1}. ${item.q}</strong><ul class="options"><li><button class="option-btn" onclick="answer(${i}, true)">S铆, sucede</button></li><li><button class="option-btn" onclick="answer(${i}, false)">No / No estoy seguro</button></li></ul>`;
        qCont.appendChild(div);
    });

    function updateProgress() {
        const percent = ((currentStep) / (questions.length + 1)) * 100;
        document.getElementById('progressBar').style.width = percent + "%";
    }

    function answer(index, isRisk) {
        if(isRisk) { score++; userRisks.push(questions[index].risk); }
        document.getElementById(`q-${index}`).classList.remove('active');
        currentStep++; updateProgress();
        if(currentStep < questions.length) { document.getElementById(`q-${currentStep}`).classList.add('active'); } 
        else { document.getElementById('lead-form').classList.add('active'); }
    }

    function processResults() {
        if(!document.getElementById('userName').value || !document.getElementById('userIndustry').value) return alert("Por favor, complet谩 todos los campos.");
        document.getElementById('lead-form').classList.remove('active');
        document.getElementById('results').classList.add('active');
        updateProgress();

        const resBox = document.getElementById('res-box');
        const resDesc = document.getElementById('res-desc');
        let cat = ""; let msg = "";

        if(score >= 4) {
            cat = "ALTO POTENCIAL DE ESCALAMIENTO"; resBox.className = "result-box escalar";
            msg = "Tu estructura actual lleg贸 al l铆mite. Implementar software a medida desbloquear谩 un crecimiento masivo al automatizar el caos actual.";
        } else if(score >= 2) {
            cat = "RIESGO MODERADO / OPTIMIZABLE"; resBox.className = "result-box moderado";
            msg = "Ten茅s procesos que funcionan, pero te quitan tiempo valioso. Hay un gran margen para ganar eficiencia operativa.";
        } else {
            cat = "OPERACIN ESTABLE"; resBox.className = "result-box estable";
            msg = "Tu sistema es ordenado, el siguiente paso es la integraci贸n total para escalar sin sumar m谩s personal administrativo.";
        }

        resBox.innerHTML = `<strong>Estado: ${cat}</strong><br>Puntaje de Fricci贸n: ${score}/5`;
        resDesc.innerText = msg;

        const waMsg = `Hola! Soy ${document.getElementById('userName').value} de ${document.getElementById('userCompany').value}. Hice el test de Excel (${cat}). Me interesa agendar la asesor铆a para el rubro ${document.getElementById('userIndustry').value}.`;
        document.getElementById('wa-link').href = `https://wa.me/TUNUMERO?text=${encodeURIComponent(waMsg)}`;
    }

    function generatePDF() {
        const { jsPDF } = window.jspdf; const doc = new jsPDF();
        const name = document.getElementById('userName').value;
        const company = document.getElementById('userCompany').value;
        const industry = document.getElementById('userIndustry').value;

        doc.setFontSize(20); doc.setTextColor(30, 126, 52);
        doc.text("Hoja de Ruta de Escalamiento Tecnol贸gico", 20, 20);
        doc.setFontSize(12); doc.setTextColor(100);
        doc.text(`Empresa: ${company} | Rubro: ${industry}`, 20, 30);
        
        doc.setTextColor(0); doc.setFontSize(14); doc.text("Diagn贸stico T茅cnico:", 20, 50);
        doc.setFontSize(11); let y = 60;
        userRisks.forEach(risk => { doc.text(`- ${risk}`, 25, y); y += 8; });

        y += 10; doc.setFontSize(14); doc.text(`Recomendaci贸n Estrat茅gica para ${industry}:`, 20, y);
        y += 10; doc.setFontSize(11);
        
        let advice = "";
        if(industry === "Agro") advice = "Para el sector Agro, la clave es la trazabilidad digital. Recomendamos centralizar el registro de lotes y aplicaciones en una App offline que elimine las planillas de campo, permitiendo predecir rindes con datos reales y no con estimaciones manuales.";
        else if(industry === "Juridico") advice = "En el rubro legal, la automatizaci贸n documental es el mayor multiplicador de ingresos. Sugerimos integrar un sistema de generaci贸n de escritos y gesti贸n de plazos que se sincronice con los portales judiciales, eliminando el chequeo manual diario.";
        else advice = "Para empresas de servicios y Pymes, el foco debe estar en la unificaci贸n de islas de informaci贸n. Conectar ventas, stock y administraci贸n en un solo tablero permitir谩 escalar la facturaci贸n sin necesidad de contratar m谩s personal para tareas de carga.";

        const splitAdvice = doc.splitTextToSize(advice, 170);
        doc.text(splitAdvice, 20, y);
        doc.save(`Plan_Escalamiento_${company}.pdf`);
    }
</script>
</body>
</html>
